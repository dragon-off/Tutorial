<html>
<head>
	<title>СберБанк</title>
	<link href="default.css" rel="stylesheet" type="text/css">
	<meta http-equiv="Content-Language" content="en-ru">
	<LINK REL="StyleSheet" HREF="style_messages.css" TYPE="text/css">
	<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
	<META http-equiv="pragma" content="no-cache">
	<META http-equiv="expires" content="0">
	<script type="text/javascript" src="/js/qevent.js"></script>  
	<LINK rel=stylesheet type="text/css" href="style.css">
	<script language="Javascript" type="text/javascript">
	function alert1()
	{
  		if(q.style.display=='none')
		{
			q.style.display='block';
			setTimeout('close()', 5000);
		}
  		else 
   		{
			q.style.display='none';
   		}
 	}

	function close()
 	{
		q.style.display='none';
		qq.style.display='none';
	}
function close_salert(el)
{
var elem = parent.frames[0].document.getElementById('blockres');
elem.innerHTML=elem.innerHTML*1-1;
if(el==2) elem.innerHTML=0;
var messages = elem.innerHTML*1;
if(messages<0)
	{
	messages=0;
	elem.innerHTML=0;
	}
if(messages==0)
	parent.frames[0].document.getElementById('block').style.display = 'none';
parent.frames[1].document.getElementById('message_box_'+el+'_text').innerHTML="";
if(el==1)
	parent.frames[1].document.getElementById('message_box_3_text').innerHTML="";
}	
	</script>

<%
G=(${priority}0)/10
IF(G EQ 0)
	G=1
IF(G EQ 1)
	Q=0
IF(G EQ 2)
	Q=40
IF(G EQ 3)
	Q=60
IF(G EQ 4)
	Q=90
IF(G EQ 5)
	Q=120
	
W=(${priority_lavel}0)/10
IF(W GT 0)
BEGIN
	W=W-1
	"w="W
	I=1
	WHILE(I LE 40)
	BEGIN
		SETARRAY(600+I+Q STRSUB(ARRAY(600+I+Q) 1 30)+"F"+STRNTS(W))
		I=I+1
	END

END	
	
W=(${window}0)/10
B=(${button}0)/10
V=(${level}0)/10
W=STRSTN(W)
IF(W GT 0 AND B GT 0)
	IF(B EQ 1)
		SETARRAY(600+Q+W STRNTS(V)+STRSUB(ARRAY(600+Q+W) 2 32))
	ELSE
		SETARRAY(600+Q+W STRSUB(ARRAY(600+Q+W) 1 B-1)+STRNTS(V)+STRSUB(ARRAY(600+Q+W) B+1 32))
G=(${priority}0)/10
IF(G EQ 0)
	G=1

R=(${reset}0)/10
IF(R EQ 0)
	R=0

IF(R EQ 1)
BEGIN
	I=1
	WHILE(I LE 40)
	BEGIN
		SETARRAY(600+I "000000000000000000000000000000F0")
		SETARRAY(640+I "000000000000000000000000000000F0")
		SETARRAY(660+I "000000000000000000000000000000F0")
		SETARRAY(690+I "000000000000000000000000000000F0")
		SETARRAY(720+I "000000000000000000000000000000F0")
		I=I+1
	END
END

Z=P
%>
</head>
<body link=white alink=white vlink=white scrollwidth=100>
<form action="">

<TABLE><TR VALIGN=TOP><TD>

<form action="window_button.qsp2">
<TABLE><TR><TD>
	</TD></TR></TABLE>
</form>

	<table class=borderedbox  border=1 cellpadding=0 cellspacing=0 bordercolor="#000000">
<tbody><tr><td class=boxTop rowspan=2>№</td>
<td class=boxTop width=180 rowspan=2>Название операции</td>
<td class=boxTop width=50 rowspan=2 align=center><h3 class=box>Кол. ожид. кл.</h3></td>
<td class=boxTop width=50 rowspan=2 align=center><h3 class=box>Время ожид.</h3></td>
<%
W=10

"<td class=boxTop colspan="W" align=center><h3 class=box>Окна<BR>(нажмите на окно которое хотите изменить)</h3></td></tr>"
I=1
"<TR>"

	IF(G EQ 1)
		H=0
	IF(G EQ 2)
		H=40
	IF(G EQ 3)
		H=60
	IF(G EQ 4)
		H=90
	IF(G EQ 5)
		H=120

WHILE(I LE W)
BEGIN
	IF(ARRAY(400+I) EQ 0)
	BEGIN
		IF(STRSUB(ARRAY(600+H+I) 32 32) EQ "0")
		BEGIN
			"<TD class=boxMain style='background-color:#0099FF;' align=center>"
		END
		IF(STRSUB(ARRAY(600+H+I) 32 32) EQ "1")
		BEGIN
			"<TD class=boxMain style='background-color:#FFFF66;' align=center >"
		END
		IF(STRSUB(ARRAY(600+H+I) 32 32) EQ "2")
		BEGIN
			"<TD class=boxMain style='background-color:#FF6633;'  align=center >"
		END
		"<div id=link_1_1 class=listItem ><B><FONT size=+1>"
		I
		"</FONT></B></DIV></TD>"
	END
	I=I+1
END
"</TR>"
M=10 {MAX GROUPS}
I=1
WHILE(I LE M)
BEGIN
	IF(ARRAY(300+I) EQ 0)
	BEGIN
		IF(((I/2)*2) EQ I)
		BEGIN
			"<TR bgcolor=#E2E2E2>"
		END
		ELSE
			"<TR>"
	"<TD align=center>"I"</TD><TD>"BUTTON_LETTER(I)" "BUTTON_NAME(I)"</TD><TD align=center>"BUTTON_QUEUE(I)"</TD><TD align=center>" 
	PRINT_CLOCK_SEC(BUTTON_RWT(I))"</TD>"
	P=1
	{+prior to array}

	
	WHILE(P LE W)
	BEGIN
		K=ARRAY(600+H+P)
		{PROVERKA STROKI}
		IF(STRSUB(K 31 31) NE "F")
		BEGIN
			SETARRAY(600+H+P "000000000000000000000000000000F0") {31=F}
			K=ARRAY(600+H+P)
		END
		L=STRSUB(K I I)
		IF(ARRAY(400+P) EQ 0)
		BEGIN
			"<form name=loginFormJ id=form1><input type=hidden name=call_button>"
	
			"<TD id=win_"P"-"I" align=center>"
		

			{"<a onclick=setget('1','"P"','"I"','1','"G"','obj')>a</a>"}
		{jacheyko!!!!!!!!!!!!!!!!!!!!!}
		IF(1 EQ 1)
		BEGIN
			IF(L EQ "0")
			BEGIN
				"<IMG SRC=no.png border=0 >"
			END ELSE
			BEGIN
		
			"<select name=menu1 >"
			R=0
			WHILE(R LE 9)
			BEGIN
			Z=R
				IF(STRNTS(Z) EQ L)
				BEGIN
					"<option selected value="R">"R"</option>"
				END ELSE
				BEGIN
					"<option value="R">"R"</option>"
				END
				R=R+1
			END
			{ priority_lavel=n-1}"</form>"
			END 
		END ELSE
		IF(L NE "0")
		BEGIN
			"<IMG SRC=yes.png border=0 >"
		END
		ELSE
		BEGIN
			"<IMG SRC=no.png border=0 >"
		END
		"</TD>"
	END
	P=P+1
	END
	"</TR>"
	T=0
	{H=0}
	C=0
	
	END {IF VIEW BUTTON}
	I=I+1
END
""

"</table></TD><TD>"
%>
</TD></TD></TABLE><table></table>
<TABLE BORDER=0><TR><TD>
	

<table class=borderedbox  border=0 cellpadding=0 cellspacing=0>
<tbody>
<tr><td class=boxTop>Прогноз изменений</td></tr>
<tr><td class=boxMain> Время ожидания сократится на: 8 минут<br><input onclick="location.href='/settings_admin/priority/window_button.qsp2?save=1';" type=button value="Сохранить изменения"></td></tr>
</tbody></table>
</TD></TR></TABLE>

<table width='100%' height='100%' id="message_box_1" style="height:100%;width:100%;position: absolute;left:0px;top:0px;display:none;z-index:998; background-image:url('halfpixel.png');">
<tr>
<td style="text-align:center;">
<div class="error_box" >
<table cellpadding=0 cellspacing=0 border=0 style="height:100%;width:100%;">
	<tr height='58px'>
		<td>
			<div style="border-bottom:solid 1px #f43839;height: 58px;background-color: #fccac1;width:100%;">
			<table cellpadding=0 cellspacing=0 border=0 style="height:100%;width:100%;">
				<tr>
					<td style="padding:9px;">
						<img src='error.gif' border=0/>
					</td>
					<td style="padding:9px; font-family: Arial, sans-serif;font-size:14pt;text-transform:uppercase;color:#f43839;text-align:center;">
						Внимание!
					</td>
					<td style="padding:9px;text-align:right;">
						<img src='close_error.gif' style="cursor:pointer;" onClick="close_salert(1); document.getElementById('message_box_1').style.display='none';" border=0/>
					</td>
					
				</tr>
			</table>
			</div>
		</td>
	</tr>
	<tr>
		<td style="padding:5px;vertical-align:top;" id="message_box_1_text">

		</td>
	</tr>
	<tr>
		<td style="padding:5px;vertical-align:top;" id="message_box_3_text">

		</td>
	</tr>
	<tr>
		<td>
		<div style="border-top:solid 1px #f43839;height: 38px;background-color: #fccac1;width:100%;text-align:center;">
			<input type="button" value="OK" onClick="close_salert(1); document.getElementById('message_box_1').style.display='none';" style="height:35px;width:80%;">
			</div>
		</td>
	</tr>
</table>
</div>
</td>
</tr>
</table>
<table width='100%' height='100%' id="message_box_2" style="height:100%;width:100%;position: absolute;left:0px;top:0px;display:none;z-index:997;background-image:url('halfpixel.png');">
<tr>
<td style="text-align:center;">
<div class="error_box" >
<table cellpadding=0 cellspacing=0 border=0 style="height:100%;width:100%;">
	<tr height='58px'>
		<td>
			<div style="border-bottom:solid 1px #f43839;height: 58px;background-color: #fccac1;width:100%;">
			<table cellpadding=0 cellspacing=0 border=0 style="height:100%;width:100%;">
				<tr>
					<td style="padding:9px;">
						<img src='error.gif' border=0/>
					</td>
					<td style="padding:9px; font-family: Arial, sans-serif;font-size:14pt;text-transform:uppercase;color:#f43839;text-align:center;">
						Внимание!
					</td>
					<td style="padding:9px;text-align:right;">
						<img src='close_error.gif' style="cursor:pointer;" onClick="close_salert(2); document.getElementById('message_box_2').style.display='none';" border=0/>
					</td>
				</tr>
			</table>
			</div>
		</td>
	</tr>
	<tr>
		<td style="padding:5px;vertical-align:top;" id="message_box_2_text">

		</td>
	</tr>
</table>
</div>
</td>
</tr>
</table>
<table width='100%' height='100%'  style="height:100%;width:100%;position: absolute;left:0px;top:0px;display:none;z-index:999;background-image:url('halfpixel.png');">
<tr>
<td style="text-align:center;">
<div class="error_box" >
<table cellpadding=0 cellspacing=0 border=0 style="height:100%;width:100%;">
	<tr height='58px'>
		<td>
			<div style="border-bottom:solid 1px #f43839;height: 58px;background-color: #fccac1;width:100%;">
			<table cellpadding=0 cellspacing=0 border=0 style="height:100%;width:100%;">
				<tr>
					<td style="padding:9px;">
						<img src='error.gif' border=0/>
					</td>
					<td style="padding:9px; font-family: Arial, sans-serif;font-size:14pt;text-transform:uppercase;color:#f43839;text-align:center;">
						Внимание!
					</td>
					<td style="padding:9px;text-align:right;">
						<img src='close_error.gif' style="cursor:pointer;" onClick="close_salert(3); document.getElementById('message_box_3').style.display='none';" border=0/>
					</td>
				</tr>
			</table>
			</div>
		</td>
	</tr>
	<tr>
		<td style="padding:5px;vertical-align:top;" id="message_box_3_text">

		</td>
	</tr>
</table>
</div>
</td>
</tr>
</table>
</body>
</html>

<script type="text/javascript">
		var updating = false;
		function GetXmlHttpObject() {
		   var xmlHttp = null;
		   try {
		      // Firefox, Opera 8.0+, Safari
		      xmlHttp = new XMLHttpRequest();
		   } catch (e) {
		      // Internet Explorer
		      try {
		         xmlHttp = new ActiveXObject('Msxml2.XMLHTTP');
		      } catch (e) {
		         xmlHttp = new ActiveXObject('Microsoft.XMLHTTP');
		      }
		   }
		   if (xmlHttp.overrideMimeType) {
		      xmlHttp.overrideMimeType('text');
		   }
		   return xmlHttp;
		}
		function createXMLHttpRequest() {
		  if(navigator.appName == "Microsoft Internet Explorer"){
		      req = new ActiveXObject("Microsoft.XMLHTTP");
		  }else{
		      req = new XMLHttpRequest();
		  }
		  return req;  
		}
		function rawsend(url,cb) {
		  var req = createXMLHttpRequest();
		  req.onreadystatechange = function () {                
		      if(req.readyState == 4) {        
		        if( req.status == 200) {

		          if(cb!=null) cb(req.responseText);	
		        } else if (req.readyState == 4  && req.status != 200) {                     
		     
		      }
		    }
		  }
		  req.open("get",  url, true);
		  req.send(null);
		}
		
		function getInt(arg) {
		  var n=parseInt(arg);
		  if(isNaN(n)) return 0; else return n;
		}

		function update(url,obj) {
			parseQwinInfo = function(resp) {
				
				var line_split;
				var el_g;
				var system_type = '';
				system_type = system_type.toUpperCase();
				el_g = document.getElementById(obj);
				el_g.innerHTML = resp;
				updating = false;
				updateTimer_reset();
			}
			
			
			getStandardInfo = function() {
			// var url = 'getinfo.qsp2?type=1';
			///////// alert("ok resp:"+urll);
			  return rawsend(url,parseQwinInfo);
			}
			if(!updating) {
				updating = true;
				getStandardInfo();
			}
		}
		qwin_event.trig = function(eventType, unit, payload) {
			update();
		}
		qwin_event.setEvents = function() {
			// set which events we should listen to
			// this function needs to be called manually to set up which events to listen to
			// this function is also called once when server is up
			qwin_event.waitForEventTrig("2.3.4.8");
		}
		// the following call should be put at the end of the page/javascript
		qwin_event.setEvents();
		var updateTimer;
		updateTimer_reset = function() {
			clearTimeout(updateTimer);
			//updateTimer = setTimeout(function() {update(); },500);
		}
	
			function setget(type,win,button,level,priority,obj) {
			url="/settings_admin/priority/setget.qsp2?type="+type+"&window="+win+"&button="+button+"&level="+level+"&priority="+priority+"&obj=\""+obj+"\"";
		//	alert(url);
			update(url,obj);
		};
		function setget_combo(type,win,button,level,priority,obj,selObj) {
			url="/settings_admin/priority/setget.qsp2?type="+type+"&window="+win+"&button="+button+"&level="+selObj.options[selObj.selectedIndex].value+"&priority="+priority+"&obj=\""+obj+"\"";
			//url=eval(url);
		//	alert(url);
			update(url,obj);
			
		};
function call_customer(type,win,button,level,priority,obj,selObj){ //v3.0
 eval("parent"+".content.location='?type=1&window="+win+"&button="+button+"&priority="+priority+"&level="+selObj.options[selObj.selectedIndex].value+"'&obj=\""+obj+"\"'");
}
	</script>