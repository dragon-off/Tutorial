<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251" />
<title>Документ Без Имени</title>
	<script type="text/javascript" src="/js/qevent.js"></script>  
</head>

<body>

<script type="text/javascript">
		var updating = false;
		function GetXmlHttpObject() {
		   var xmlHttp = null;
		   try {
		      // Firefox, Opera 8.0+, Safari
		      xmlHttp = new XMLHttpRequest();
		   } catch (e) {
		      // Internet Explorer
		      try {
		         xmlHttp = new ActiveXObject('Msxml2.XMLHTTP');
		      } catch (e) {
		         xmlHttp = new ActiveXObject('Microsoft.XMLHTTP');
		      }
		   }
		   if (xmlHttp.overrideMimeType) {
		      xmlHttp.overrideMimeType('text');
		   }
		   return xmlHttp;
		}
		function createXMLHttpRequest() {
		  if(navigator.appName == "Microsoft Internet Explorer"){
		      req = new ActiveXObject("Microsoft.XMLHTTP");
		  }else{
		      req = new XMLHttpRequest();
		  }
		  return req;  
		}
		function rawsend(url,cb) {
		  var req = createXMLHttpRequest();
		  req.onreadystatechange = function () {                
		      if(req.readyState == 4) {        
		        if( req.status == 200) {

		          if(cb!=null) cb(req.responseText);	
		        } else if (req.readyState == 4  && req.status != 200) {                     
		     
		      }
		    }
		  }
		  req.open("get",  url, true);
		  req.send(null);
		}
		
		function getInt(arg) {
		  var n=parseInt(arg);
		  if(isNaN(n)) return 0; else return n;
		}
		function update(url) {
			parseQwinInfo = function(resp) {
				
				var line_split;
				var el_g;
				var system_type = '';
				system_type = system_type.toUpperCase();
				line_split = resp.split('#');
				alert(line_split.length);
				for (var r=0; r <= line_split.length-1; r++) {
					obj_split = line_split[r].split('¤');
					el_g = document.getElementById(obj_split[0]);
					el_g.innerHTML = obj_split[1];
				}
				
				updating = false;
				updateTimer_reset();
			}
			
			
			getStandardInfo = function() {
		  return rawsend(url,parseQwinInfo);
			}
			if(!updating) {
				updating = true;
				getStandardInfo();
			}
		}
		qwin_event.trig = function(eventType, unit, payload) {
			update('/sber/get.qsp?type='+eventType);
			alert(eventType);
		}
		qwin_event.setEvents = function() {

			qwin_event.waitForEventTrig("2.3.4.5.7.8");
		}

		qwin_event.setEvents();
		var updateTimer;
		updateTimer_reset = function() {
			clearTimeout(updateTimer);

		}
	
		</script>
	
<table border="1" width="100" height="100"><tr><td id="TIME"></td></tr></table>
<table border="1" width="100" height="100"><tr><td id="TIME_NO"></td></tr></table>
</body>
</html>
